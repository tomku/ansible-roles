
---
- name: Install leiningen
  get_url: url=https://raw.github.com/technomancy/leiningen/stable/bin/lein
           dest=/usr/local/bin/lein
           owner=root group=root mode=0755

- name: Temporarily downgrade leiningen
  replace: dest=/usr/local/bin/lein regexp='LEIN_VERSION="2.4.3"' replace='LEIN_VERSION="2.4.2"'
  ignore_errors: true

- name: Force-download leiningen's jars
  sudo: True
  sudo_user: "{{ interactive_user }}"
  command: lein help creates=/home/{{ interactive_user }}/.lein
  when: interactive_user and initialize_lein

